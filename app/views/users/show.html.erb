<div class="container-fluid main-container">
<%= render "layouts/sidenav" %>
<div class="col-md-10 content">

<% if current_user.id == @user.id %>
<h2> My Profile </h2>
<% else %>
<h2> 
<%= @user.name.pluralize.humanize %> Profile 

<% if current_user.id != @user.id %>
  <% if current_user.friends.include? @user %>
    <%= link_to "Remove Friendship", current_user.friendships.find_by_friend_id(@user.id), method: :delete %>
  <% else %>
    <%= link_to "Add Friend", friendships_path(friend_id: @user), method: :post %>
  <% end %>
<% end %>

</h2>
<% end %>

<p>Username: <%=h @user.name %></p>
<p>Email: <%= @user.email %></p>

<p>Profile picture:</p>
<% if @user.avatar? %>
<%= link_to image_tag(@user.avatar_url, :width => 100, :height => 100), @user.avatar_url %>
<% else %>
<%= link_to image_tag(@user.gravatar_url, :width => 100, :height => 100), @user.gravatar_url %>
<% end %>

<% if current_user.id != @user.id %>
<h2>Friends <%= @user.name %> follow</h2>
<% else %> 
<h2>Friends you follow</h2>
<% end %>

<ul>
  <% for friendship in @user.friendships %>
    <li>
      <%=h link_to friendship.friend.name, friendship.friend %>
    </li>
  <% end %>
</ul>

<% if current_user.id != @user.id %>
<h2>Friends following <%= @user.name %> </h2>
<% else %>
<h2>Friends following you </h2>
<% end %>

<ul>
  <% for user in @user.inverse_friends %>
    <li><%=h link_to user.name, user %></li>
  <% end %>
</ul>

<% if current_user.id != @user.id %>
<h2> <%= @user.name %>'s Activities </h2>

<h2>Posts</h2>

<%= render @user.posts %>
<%= render @user.comments %>
<% end %>

</div>
<%= render "layouts/footer" %>
</div>